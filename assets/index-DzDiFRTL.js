(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();const N=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],g=e=>{e.classList.toggle("card__like-button_is-active")},k=e=>{e.remove()},j=()=>document.getElementById("card-template").content.querySelector(".card").cloneNode(!0),b=(e,{onPreviewPicture:t,onLikeIcon:n,onDeleteCard:o})=>{const r=j(),s=r.querySelector(".card__like-button"),c=r.querySelector(".card__control-button_type_delete"),m=r.querySelector(".card__image");return m.src=e.link,m.alt=e.name,r.querySelector(".card__title").textContent=e.name,n&&s.addEventListener("click",()=>n(s)),o&&c.addEventListener("click",()=>o(r)),t&&m.addEventListener("click",()=>t({name:e.name,link:e.link})),r},h=e=>{if(e.key==="Escape"){const t=document.querySelector(".popup_is-opened");i(t)}},p=e=>{e.classList.add("popup_is-opened"),document.addEventListener("keyup",h)},i=e=>{e.classList.remove("popup_is-opened"),document.removeEventListener("keyup",h)},D=e=>{e.querySelector(".popup__close").addEventListener("click",()=>{i(e)}),e.addEventListener("mousedown",t=>{t.target.classList.contains("popup")&&i(e)})},M=(e,t,n,o)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.add(o.inputErrorClass),r.textContent=n,r.classList.add(o.errorClass)},E=(e,t,n)=>{const o=e.querySelector(`#${t.id}-error`);t.classList.remove(n.inputErrorClass),o.classList.remove(n.errorClass),o.textContent=""},V=(e,t,n)=>{t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?E(e,t,n):M(e,t,t.validationMessage,n)},$=e=>e.some(t=>!t.validity.valid),C=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},K=(e,t)=>{e.disabled=!1,e.classList.remove(t.inactiveButtonClass)},q=(e,t,n)=>{$(e)?C(t,n):K(t,n)},z=(e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);q(n,o,t),n.forEach(r=>{r.addEventListener("input",()=>{V(e,r,t),q(n,o,t)})})},F=e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach(t=>{z(t,e)})},y=(e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);n.forEach(r=>{E(e,r,t),r.setCustomValidity("")}),C(o,t)},a={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},x=document.querySelector(".places__list"),_=document.querySelector(".popup_type_edit"),d=_.querySelector(".popup__form"),P=d.querySelector(".popup__input_type_name"),A=d.querySelector(".popup__input_type_description"),f=document.querySelector(".popup_type_new-card"),l=f.querySelector(".popup__form"),G=l.querySelector(".popup__input_type_card-name"),H=l.querySelector(".popup__input_type_url"),v=document.querySelector(".popup_type_image"),L=v.querySelector(".popup__image"),J=v.querySelector(".popup__caption"),Q=document.querySelector(".profile__edit-button"),R=document.querySelector(".profile__add-button"),O=document.querySelector(".profile__title"),w=document.querySelector(".profile__description"),B=document.querySelector(".profile__image"),S=document.querySelector(".popup_type_edit-avatar"),u=S.querySelector(".popup__form"),T=u.querySelector(".popup__input"),I=({name:e,link:t})=>{L.src=t,L.alt=e,J.textContent=e,p(v)},U=e=>{e.preventDefault(),O.textContent=P.value,w.textContent=A.value,i(_)},W=e=>{e.preventDefault(),B.style.backgroundImage=`url(${T.value})`,i(S)},X=e=>{e.preventDefault(),x.prepend(b({name:G.value,link:H.value},{onPreviewPicture:I,onLikeIcon:g,onDeleteCard:k})),i(f)};d.addEventListener("submit",U);l.addEventListener("submit",X);u.addEventListener("submit",W);Q.addEventListener("click",()=>{P.value=O.textContent,A.value=w.textContent,y(d,a),p(_)});B.addEventListener("click",()=>{u.reset(),y(u,a),p(S)});R.addEventListener("click",()=>{l.reset(),y(l,a),p(f)});N.forEach(e=>{x.append(b(e,{onPreviewPicture:I,onLikeIcon:g,onDeleteCard:k}))});const Y=document.querySelectorAll(".popup");Y.forEach(e=>{D(e)});F(a);
